{{- $lang := .Type | default "" -}}
{{- $code := .Inner -}}

{{- if hugo.Store.Get "RENDERING_SLIDES" -}}
  {{- $class := "" -}}
  {{- with $lang -}}
    {{- $class = printf ` class="language-%s"` . -}}
  {{- end -}}
  {{- printf "<pre><code%s>%s</code></pre>" $class ($code | htmlEscape) | safeHTML -}}
{{- else -}}
  {{- highlight $code $lang "" -}}
{{- end -}}
